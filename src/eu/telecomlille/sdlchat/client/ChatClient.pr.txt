PROCESS ChatClient;
	DCL msg, cause Charstring;
	DCL orig, dest PId;
	START ;
		NEXTSTATE Idle;
	STATE Idle;
		INPUT ConnectUI;
			OUTPUT Connect;
			NEXTSTATE Connected;
	ENDSTATE Idle;

	STATE Connected;
		INPUT Presence(orig);
			OUTPUT ConnectedUI(orig);
			NEXTSTATE -;
		INPUT Absence(orig);
			OUTPUT DisconnectedUI(orig);
			NEXTSTATE -;
		INPUT DataUI(msg, dest);
			OUTPUT Data(msg, dest);
			NEXTSTATE -;
		INPUT Data(msg, orig);
			OUTPUT DataUI(msg, orig);
			NEXTSTATE -;
		INPUT Disconnect;
			OUTPUT Disconnect;
			OUTPUT DisconnectedUI(self);
			NEXTSTATE Idle;
	ENDSTATE Connected;
ENDPROCESS ChatClient;
